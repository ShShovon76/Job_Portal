<div class="container py-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">
      <i class="bi bi-file-earmark-check text-primary me-2"></i>
      My Applied Jobs
    </h2>
    <span class="badge bg-light text-dark border">
      {{ totalItems }} Applications
    </span>
  </div>

  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary"></div>
  </div>

  <div *ngIf="!loading && appliedJobs.length === 0" class="text-center py-5 bg-white shadow-sm rounded">
    <i class="bi bi-inbox text-muted mb-3" style="font-size: 3rem;"></i>
    <h5>No applications found</h5>
    <p class="text-muted">You havenâ€™t applied for any jobs yet.</p>
    <a routerLink="/jobs" class="btn btn-primary mt-2">Browse Jobs</a>
  </div>

  <div *ngIf="!loading && appliedJobs.length > 0" class="row">
    <div class="col-12 mb-3" *ngFor="let application of appliedJobs">

      <div class="card shadow-sm border-0">
        <div class="card-body p-4">

          <div class="row align-items-center">

            <div class="col-md-7">
              <h5 class="fw-bold text-primary mb-1">
                {{ application.jobTitle }}
              </h5>

              <div class="text-muted small">
                <span class="me-3">
                  <i class="bi bi-building me-1"></i>
                  {{ application.companyName }}
                </span>
                <span>
                  <i class="bi bi-calendar-event me-1"></i>
                  {{ application.appliedAt | date:'mediumDate' }}
                </span>
              </div>
            </div>

            <div class="col-md-5 text-md-end mt-3 mt-md-0">

              <span class="badge rounded-pill px-3 py-2 me-2" [ngClass]="getStatusBadgeClass(application.status)">
                {{ application.status }}
              </span>

              <button class="btn btn-outline-primary btn-sm me-2" [routerLink]="['/jobs', application.jobId]">
                View
              </button>

              <button class="btn btn-outline-danger btn-sm" (click)="deleteApplication(application)">
                Delete
              </button>


            </div>

          </div>
        </div>
      </div>

    </div>
  </div>

  <nav *ngIf="totalItems > pageSize" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 0">
        <button class="page-link" (click)="onPageChange(currentPage - 1)">Previous</button>
      </li>

      <li class="page-item active">
        <span class="page-link">{{ currentPage + 1 }}</span>
      </li>

      <li class="page-item" [class.disabled]="(currentPage + 1) * pageSize >= totalItems">
        <button class="page-link" (click)="onPageChange(currentPage + 1)">Next</button>
      </li>
    </ul>
  </nav>
</div>