<div class="auth-container">
  <div class="auth-card">
    
    <!-- Header -->
    <div class="auth-header text-center mb-5">
      <div class="logo mb-4">
        <i class="bi bi-shield-lock-fill text-primary fs-1"></i>
        <h2 class="mt-3 fw-bold">Reset Password</h2>
      </div>
      <p class="text-muted">
        Enter your email address and we'll send you instructions to reset your password.
      </p>
    </div>

    <!-- Success Message -->
    <div *ngIf="emailSent" class="alert alert-success text-center">
      <i class="bi bi-envelope-check-fill fs-1 mb-3 d-block"></i>
      <h4 class="alert-heading">Check Your Email!</h4>
      <p class="mb-3">
        We've sent password reset instructions to 
        <strong>{{ forgotPasswordForm.value.email }}</strong>
      </p>
      <p class="small text-muted">
        If you don't see the email, check your spam folder or 
        <a (click)="resetForm()" class="text-decoration-none fw-medium">try another email address</a>.
      </p>

      <button (click)="navigateToLogin()" class="btn btn-primary mt-2">
        <i class="bi bi-arrow-left me-2"></i>Back to Login
      </button>
    </div>

    <!-- Reset Form -->
    <div *ngIf="!emailSent">

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
      </div>

      <!-- Form -->
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>

        <!-- Email -->
        <div class="mb-4">
          <label for="email" class="form-label fw-medium">Email Address</label>

          <div class="input-group">
            <span class="input-group-text bg-light border-end-0">
              <i class="bi bi-envelope text-muted"></i>
            </span>

            <input
              type="email"
              id="email"
              formControlName="email"
              class="form-control border-start-0"
              [class.is-invalid]="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
              placeholder="Enter your registered email"
              autocomplete="email"
              autofocus
            >
          </div>

          <div
            *ngIf="f['email'].invalid && (f['email'].touched || f['email'].dirty)"
            class="invalid-feedback d-block"
          >
            <span *ngIf="f['email'].errors?.['required']">Email is required</span>
            <span *ngIf="f['email'].errors?.['email']">Please enter a valid email</span>
          </div>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn btn-primary btn-lg w-100 mb-3"
          [disabled]="loading || forgotPasswordForm.invalid"
        >
          <span *ngIf="!loading">Send Reset Instructions</span>
          <span *ngIf="loading">
            <span class="spinner-border spinner-border-sm me-2" role="status"></span>
            Sending...
          </span>
        </button>

        <!-- Back to Login -->
        <div class="text-center">
          <a (click)="navigateToLogin()" class="text-decoration-none text-muted">
            <i class="bi bi-arrow-left me-1"></i>Back to Login
          </a>
        </div>

      </form>
    </div>

    <!-- HelpText -->
    <div class="text-center mt-4">
      <p class="small text-muted">
        Need help? <a href="#" class="text-decoration-none">Contact support</a>
      </p>
    </div>

  </div>
</div>
<auth-footer></auth-footer>