<!-- contact.component.html -->
<div class="contact-page">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">Get in Touch</h1>
        <p class="hero-subtitle">We're here to help you with any questions about our job portal</p>
        <div class="hero-actions">
          <button class="btn btn-primary" (click)="scrollToForm()">
            <i class="bi bi-envelope"></i> Send Message
          </button>
          <a href="tel:+15551234567" class="btn btn-outline-light">
            <i class="bi bi-telephone"></i> Call Now
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Info Cards -->
  <section class="contact-info-section">
    <div class="container">
      <div class="section-header">
        <h2>Contact Information</h2>
        <p class="section-subtitle">Multiple ways to reach us</p>
      </div>
      
      <div class="contact-cards">
        <div class="row g-4">
          <div class="col-md-4" *ngFor="let info of contactInfo">
            <div class="contact-card">
              <div class="contact-icon" [ngClass]="info.color">
                <i [class]="info.icon"></i>
              </div>
              <h3 class="contact-card-title">{{info.title}}</h3>
              <div class="contact-card-details">
                <p *ngFor="let detail of info.details">{{detail}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Form -->
  <section class="contact-form-section" id="contactForm">
    <div class="container">
      <div class="row align-items-center">
        <!-- Form Column -->
        <div class="col-lg-7">
          <div class="form-container">
            <div class="form-header">
              <h2>Send us a Message</h2>
              <p class="form-subtitle">
                <i class="bi bi-clock"></i> {{getSupportHours()}}
              </p>
            </div>
            
            <div *ngIf="currentUser" class="logged-in-banner">
              <div class="d-flex align-items-center">
                <i class="bi bi-person-check text-success me-2"></i>
                <span>You're logged in as <strong>{{currentUser.fullName}}</strong></span>
              </div>
            </div>

            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
              <div class="row g-3">
                <!-- Name -->
                <div class="col-md-6">
                  <label for="name" class="form-label">Full Name *</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="name"
                    formControlName="name"
                    [ngClass]="{'is-invalid': submitted && contactForm.get('name')?.errors}"
                    placeholder="Enter your full name">
                  <div *ngIf="submitted && contactForm.get('name')?.errors" class="invalid-feedback">
                    <div *ngIf="contactForm.get('name')?.errors?.['required']">Name is required</div>
                    <div *ngIf="contactForm.get('name')?.errors?.['minlength']">Name must be at least 2 characters</div>
                  </div>
                </div>

                <!-- Email -->
                <div class="col-md-6">
                  <label for="email" class="form-label">Email Address *</label>
                  <input 
                    type="email" 
                    class="form-control" 
                    id="email"
                    formControlName="email"
                    [ngClass]="{'is-invalid': submitted && contactForm.get('email')?.errors}"
                    placeholder="your.email@example.com">
                  <div *ngIf="submitted && contactForm.get('email')?.errors" class="invalid-feedback">
                    <div *ngIf="contactForm.get('email')?.errors?.['required']">Email is required</div>
                    <div *ngIf="contactForm.get('email')?.errors?.['email']">Please enter a valid email</div>
                  </div>
                </div>

                <!-- Phone -->
                <div class="col-md-6">
                  <label for="phone" class="form-label">Phone Number</label>
                  <input 
                    type="tel" 
                    class="form-control" 
                    id="phone"
                    formControlName="phone"
                    placeholder="+1 (555) 123-4567">
                  <div class="form-text">Optional - We'll only call if needed</div>
                </div>

                <!-- Company -->
                <div class="col-md-6">
                  <label for="company" class="form-label">Company</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="company"
                    formControlName="company"
                    placeholder="Your company name (optional)">
                </div>

                <!-- Category -->
                <div class="col-12">
                  <label for="category" class="form-label">Department *</label>
                  <select 
                    class="form-select" 
                    id="category"
                    formControlName="category"
                    [ngClass]="{'is-invalid': submitted && contactForm.get('category')?.errors}">
                    <option *ngFor="let dept of departments" [value]="dept.id">
                      <i [class]="dept.icon + ' me-2'"></i> {{dept.name}}
                    </option>
                  </select>
                  <div class="mt-2">
                    <span class="badge bg-info">
                      <i [class]="getCategoryIcon(contactForm.get('category')?.value)"></i>
                      Expected response: {{getResponseTime(contactForm.get('category')?.value)}}
                    </span>
                  </div>
                </div>

                <!-- Subject -->
                <div class="col-12">
                  <label for="subject" class="form-label">Subject *</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="subject"
                    formControlName="subject"
                    [ngClass]="{'is-invalid': submitted && contactForm.get('subject')?.errors}"
                    placeholder="Brief description of your inquiry">
                  <div *ngIf="submitted && contactForm.get('subject')?.errors" class="invalid-feedback">
                    <div *ngIf="contactForm.get('subject')?.errors?.['required']">Subject is required</div>
                    <div *ngIf="contactForm.get('subject')?.errors?.['minlength']">Subject must be at least 5 characters</div>
                  </div>
                </div>

                <!-- Message -->
                <div class="col-12">
                  <label for="message" class="form-label">Message *</label>
                  <textarea 
                    class="form-control" 
                    id="message"
                    formControlName="message"
                    rows="5"
                    [ngClass]="{'is-invalid': submitted && contactForm.get('message')?.errors}"
                    placeholder="Please provide detailed information about your inquiry..."></textarea>
                  <div class="d-flex justify-content-between align-items-center mt-1">
                    <div *ngIf="submitted && contactForm.get('message')?.errors" class="invalid-feedback d-block">
                      <div *ngIf="contactForm.get('message')?.errors?.['required']">Message is required</div>
                      <div *ngIf="contactForm.get('message')?.errors?.['minlength']">Message must be at least 20 characters</div>
                      <div *ngIf="contactForm.get('message')?.errors?.['maxlength']">Message cannot exceed 2000 characters</div>
                    </div>
                    <small class="text-muted ms-auto">
                      {{contactForm.get('message')?.value?.length || 0}} / 2000 characters
                    </small>
                  </div>
                </div>

                <!-- Terms -->
                <div class="col-12">
                  <div class="form-check">
                    <input 
                      class="form-check-input" 
                      type="checkbox" 
                      id="agreeToTerms"
                      formControlName="agreeToTerms"
                      [ngClass]="{'is-invalid': submitted && contactForm.get('agreeToTerms')?.errors}">
                    <label class="form-check-label" for="agreeToTerms">
                      I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and 
                      <a href="#" class="text-decoration-none">Privacy Policy</a> *
                    </label>
                    <div *ngIf="submitted && contactForm.get('agreeToTerms')?.errors" class="invalid-feedback d-block">
                      You must agree to the terms and conditions
                    </div>
                  </div>
                </div>

                <!-- Submit Button -->
                <div class="col-12">
                  <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="loading">
                    <span *ngIf="!loading">
                      <i class="bi bi-send"></i> Send Message
                    </span>
                    <span *ngIf="loading">
                      <span class="spinner-border spinner-border-sm me-2"></span>
                      Sending...
                    </span>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- FAQ Column -->
        <div class="col-lg-5">
          <div class="faq-container">
            <div class="faq-header">
              <h2>Frequently Asked Questions</h2>
              <p>Quick answers to common questions</p>
            </div>
            
            <div class="accordion" id="faqAccordion">
              <div class="accordion-item" *ngFor="let faq of faqs; let i = index">
                <h3 class="accordion-header">
                  <button 
                    class="accordion-button collapsed" 
                    type="button"
                    (click)="toggleFaq(i)"
                    [attr.aria-expanded]="faq.expanded">
                    {{faq.question}}
                  </button>
                </h3>
                <div 
                  class="accordion-collapse collapse" 
                  [class.show]="faq.expanded">
                  <div class="accordion-body">
                    {{faq.answer}}
                  </div>
                </div>
              </div>
            </div>
            
            <div class="support-banner mt-4">
              <div class="support-content">
                <i class="bi bi-headset support-icon"></i>
                <h4>Need Immediate Help?</h4>
                <p>Our support team is available Monday-Friday, 9 AM - 6 PM PST</p>
                <a href="mailto:support@jobportal.com" class="btn btn-outline-primary">
                  <i class="bi bi-envelope"></i> Email Support
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <section class="map-section">
    <div class="container">
      <div class="section-header">
        <h2>Our Location</h2>
        <p class="section-subtitle">Visit our headquarters</p>
      </div>
      
      <div class="map-container">
        <!-- Google Maps Embed (Replace with actual embed code) -->
        <div class="map-placeholder">
          <div class="map-overlay">
            <div class="map-info">
              <h4><i class="bi bi-geo-alt"></i> JobPortal Headquarters</h4>
              <p>123 Business Street<br>San Francisco, CA 94107</p>
              <a 
                href="https://maps.google.com/?q=123+Business+Street+San+Francisco+CA" 
                target="_blank" 
                class="btn btn-outline-light">
                <i class="bi bi-arrow-up-right-square"></i> Open in Google Maps
              </a>
            </div>
          </div>
          <div class="map-image">
            <!-- In production, replace with actual Google Maps embed -->
            <div class="map-fallback">
              <i class="bi bi-map"></i>
              <p>Interactive Map</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Support Hours -->
  <section class="support-hours">
    <div class="container">
      <div class="support-card">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h3 class="mb-2">24/7 Support Available</h3>
            <p class="mb-0">While our live support has specific hours, we monitor critical issues around the clock.</p>
          </div>
          <div class="col-md-4 text-md-end">
            <button class="btn btn-success">
              <i class="bi bi-chat-left-text"></i> Live Chat
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<app-footer></app-footer>